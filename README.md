# Проект "API для социальной сети YaTube"

## О YaTube

Yatube - новая, перспективная и быстрорастущая социальная сеть, стремительно
набирающая обороты. О ней говорят, её обсуждают, ей восхищаются.
И отсутствие frontend составляющей для этого совсем не помеха! Настоящие 
любители общения создают посты при помощи Postman и комментируют записи
из curl.

---
## Используемый стэк

Для разработки backend составляющей социальной сети YaTube использовался 
следующий стэк:
+ Python 3.9
+ Django
+ Django REST Framework
+ Django Djoser JWT
+ SQLite
---
## Реализованные возможности

- Аутентифицированные пользователям разрешено создание, изменение и удаление своих постов, комментариев;
- Неаутентифицированным пользователям контент доступен только для чтения;
- Реализована возможность подписки/описки на авторов. Подписаться на самого себя нельзя;
- Для аутентификации используются JWT-токены.
---

## Как запустить проект:

1. Клонировать репозиторий и перейти в него, используя командную строку:
    > git clone https://github.com/Apicqq/api_final_yatube.git

    > cd api_final_yatube
2. Создать и активировать виртуальное окружение:
    > python -m venv venv

    > source venv/scripts/activate
3. Установить зависимости из файла requirements.txt:
    > python -m pip install --upgrade pip

    > pip install -r requirements.txt
4. Выполнить миграции:
    > python manage.py migrate
5. Создать суперпользователя (в текущей реализации создание пользователей через API недоступно):
   > python manage createsuperuser
6. Запустить проект:
    > python manage.py runserver
---
## Документация

После запуска проекта статичная документация с указанием всех реализованных эндпоинтов будет доступна по адресу: http://127.0.0.1:8000/redoc/.

### API-токен

Большая часть операций взаимодействия с backend-сервером требует наличия API-токена. Получить его можно при помощи POST-запроса по следующему адресу:
   > http://127.0.0.1/api/v1/jwt/create/

Запрос при этом выглядит следующим образом:
```
{
    "username": "user",
    "password": "password"
}
```

После получения JWT-токена, его необходимо добавить к заголовкам HTTP-запросов, добавив перед этим слово 'Bearer':
> Bearer ваш_токен
---

### Примеры запросов

##### Получить список всех публикаций. При использовании параметров limit и offset выдача будет работать с пагинацией.

*GET* http://127.0.0.1:8000/api/v1/posts/ 

***Пример ответа:***
```
{
  "count": 123,
  "next": "http://api.example.org/accounts/?offset=400&limit=100",
  "previous": "http://api.example.org/accounts/?offset=200&limit=100",
  "results": [
    {
      "id": 0,
      "author": "string",
      "text": "string",
      "pub_date": "2021-10-14T20:41:29.648Z",
      "image": "string",
      "group": 0
    }
  ]
}
```
   
#### Создание новой публикации. Создавать публикации и комментарии могут только аутентифицированные пользователи.
*POST* https://127.0.0.1:8000/api/v1/posts/
```
{
"text": "string",
"image": "string",
"group": 0
}
```

***Пример ответа:***
```
{
"id": 0,
"author": "string",
"text": "string",
"pub_date": "2019-08-24T14:15:22Z",
"image": "string",
"group": 0
}
```